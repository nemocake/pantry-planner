<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pantry Planner</title>
    <!-- Google Fonts - DM Sans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&display=swap" rel="stylesheet">
  </head>
  <body>
    <div class="app-container">
      <!-- Sidebar Navigation -->
      <aside class="sidebar">
        <div class="brand" data-nav-target="dashboard">
          <div class="brand-icon">P</div>
          <div class="brand-text">PantryPlan</div>
        </div>

        <div class="nav-section">
          <div class="nav-label">Main</div>
          <button class="nav-item active" data-nav-target="dashboard">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="3" width="7" height="7"></rect><rect x="14" y="3" width="7" height="7"></rect><rect x="14" y="14" width="7" height="7"></rect><rect x="3" y="14" width="7" height="7"></rect></svg>
            Dashboard
          </button>
          <button class="nav-item" data-nav-target="pantry">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
            My Pantry
          </button>
          <button class="nav-item" data-nav-target="recipes">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
            Recipes
          </button>
          <button class="nav-item" data-nav-target="mealplanner">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
            Meal Planner
          </button>
          <button class="nav-item" data-nav-target="shoppinglist">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
            Shopping List
          </button>
        </div>

        <!-- Nav Footer - Login/Profile -->
        <div class="nav-footer" id="navAuth">
          <!-- Login button (shown when logged out) -->
          <button class="nav-item" id="loginBtn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"></path><polyline points="10 17 15 12 10 7"></polyline><line x1="15" y1="12" x2="3" y2="12"></line></svg>
            Sign In
          </button>
          <!-- Profile dropdown (shown when logged in) -->
          <div class="profile-dropdown hidden" id="profileDropdown">
            <button class="profile-dropdown__toggle" id="profileToggle">
              <span class="profile-dropdown__avatar" id="profileAvatar">U</span>
              <span class="profile-dropdown__name" id="profileName">User</span>
              <span class="profile-dropdown__arrow">‚ñº</span>
            </button>
            <div class="profile-dropdown__menu" id="profileMenu">
              <a href="#" class="profile-dropdown__item" id="myRecipesLink">
                <span>üìñ</span> My Recipes
              </a>
              <a href="#" class="profile-dropdown__item" id="myProfileLink">
                <span>üë§</span> My Profile
              </a>
              <hr class="profile-dropdown__divider">
              <button class="profile-dropdown__item profile-dropdown__item--logout" id="logoutBtn">
                <span>üö™</span> Sign Out
              </button>
            </div>
          </div>
        </div>
      </aside>

      <!-- Main Content Area -->
      <main class="main-content" id="app">
        <div class="canvas-sheet">

          <!-- Dashboard View - Overview with 4 Preview Cards -->
          <div class="view active" id="view-dashboard" data-view="dashboard">
            <header class="page-header">
              <div class="page-title">
                <h1>Dashboard</h1>
                <p>Your kitchen at a glance</p>
              </div>
            </header>

            <!-- Dashboard Grid - 4 Preview Cards -->
            <div class="dashboard-grid">

              <!-- Pantry Preview -->
              <div class="preview-card" data-navigate="pantry">
                <div class="preview-card__header">
                  <span class="preview-card__label">Pantry</span>
                  <span class="preview-card__count" id="dashPantryCount">0 items</span>
                </div>
                <div class="preview-card__content" id="dashPantryPreview">
                  <div class="preview-card__empty">No items in pantry</div>
                </div>
                <div class="preview-card__footer">
                  <span class="preview-card__link">View All</span>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </div>
              </div>

              <!-- Recipes Preview -->
              <div class="preview-card" data-navigate="recipes">
                <div class="preview-card__header">
                  <span class="preview-card__label">Recipes</span>
                  <span class="preview-card__count" id="dashRecipeCount">0 available</span>
                </div>
                <div class="preview-card__content" id="dashRecipePreview">
                  <div class="preview-card__empty">No recipes yet</div>
                </div>
                <div class="preview-card__footer">
                  <span class="preview-card__link">Browse Recipes</span>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </div>
              </div>

              <!-- Meal Plan Preview -->
              <div class="preview-card" data-navigate="planner">
                <div class="preview-card__header">
                  <span class="preview-card__label">Meal Plan</span>
                  <span class="preview-card__count" id="dashMealCount">This Week</span>
                </div>
                <div class="preview-card__content" id="dashMealPreview">
                  <div class="preview-card__empty">No meals planned</div>
                </div>
                <div class="preview-card__footer">
                  <span class="preview-card__link">Plan Meals</span>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </div>
              </div>

              <!-- Shopping List Preview -->
              <div class="preview-card" data-navigate="shopping">
                <div class="preview-card__header">
                  <span class="preview-card__label">Shopping List</span>
                  <span class="preview-card__count" id="dashShoppingCount">0 items</span>
                </div>
                <div class="preview-card__content" id="dashShoppingPreview">
                  <div class="preview-card__empty">Shopping list empty</div>
                </div>
                <div class="preview-card__footer">
                  <span class="preview-card__link">View List</span>
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M5 12h14M12 5l7 7-7 7"/>
                  </svg>
                </div>
              </div>

            </div>

            <!-- Weekly Nutrition Summary Widget -->
            <div class="nutrition-widget" id="nutritionWidget">
              <div class="nutrition-widget__header">
                <h3 class="nutrition-widget__title">Weekly Nutrition</h3>
                <button class="btn btn--small btn--ghost" id="openNutritionPrefs">
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="3"></circle>
                    <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                  </svg>
                  Goals
                </button>
              </div>
              <div class="nutrition-widget__content" id="nutritionWidgetContent">
                <div class="nutrition-widget__empty">
                  <p>Set your nutrition goals to track weekly progress</p>
                  <button class="btn btn--small btn--primary" id="setupNutritionGoals">Set Up Goals</button>
                </div>
              </div>
            </div>

            <!-- Legacy hidden elements for compatibility -->
            <div class="hidden">
              <div id="pantryDropdown"></div>
              <button id="togglePantryDropdown"></button>
              <span id="sidepanelCount">0</span>
              <div id="pantryList"></div>
              <div id="ingredientBrowser"></div>
              <h3 id="browserTitle">Browse</h3>
              <button id="closeBrowser"></button>
              <div id="browserGrid"></div>
              <div id="categoryFilter"></div>
              <button id="addIngredientBtn" class="hidden"></button>
              <button id="exportPantryBtn" class="hidden"></button>
              <button id="importPantryBtn" class="hidden"></button>
              <input type="file" id="importFileInput" accept=".json" hidden>
            </div>
          </div>

          <!-- Pantry View (Full inventory) -->
          <div class="view" id="view-pantry" data-view="pantry">
            <header class="page-header">
              <div class="page-title">
                <h1>My Pantry</h1>
                <p>Full inventory management</p>
              </div>
              <div class="page-actions">
                <button class="btn btn--secondary" data-action="export">Export</button>
                <button class="btn btn--secondary" data-action="import">Import</button>
                <button class="btn btn--primary" data-action="add-ingredient">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><line x1="12" y1="5" x2="12" y2="19"></line><line x1="5" y1="12" x2="19" y2="12"></line></svg>
                  Add Item
                </button>
              </div>
            </header>

            <!-- Category Tabs - Squared Swiss style -->
            <div class="pantry-tabs" id="pantryTabs">
              <button class="pantry-tab active" data-category="all">All</button>
              <button class="pantry-tab" data-category="proteins">Proteins</button>
              <button class="pantry-tab" data-category="dairy">Dairy</button>
              <button class="pantry-tab" data-category="vegetables">Vegetables</button>
              <button class="pantry-tab" data-category="fruits">Fruits</button>
              <button class="pantry-tab" data-category="grains">Grains</button>
              <button class="pantry-tab" data-category="spices">Spices</button>
              <button class="pantry-tab" data-category="condiments">Condiments</button>
              <button class="pantry-tab" data-category="baking">Baking</button>
              <button class="pantry-tab" data-category="beverages">Beverages</button>
            </div>

            <!-- Pantry Grid -->
            <div class="grid" id="pantryGrid">
              <!-- Pantry items rendered dynamically -->
            </div>
          </div>

          <!-- Recipes View -->
          <div class="view" id="view-recipes" data-view="recipes">
            <header class="page-header">
              <div class="page-title">
                <h1>Recipes</h1>
                <p>Discover what you can make with your ingredients</p>
              </div>
            </header>

            <!-- Recipe Stats -->
            <div class="recipe-stats">
              <div class="recipe-stat">
                <span class="recipe-stat__value text-green" id="recipeStatCanMake">0</span>
                <span class="recipe-stat__label">Can Make Now</span>
              </div>
              <div class="recipe-stat">
                <span class="recipe-stat__value text-orange" id="recipeStatAlmost">0</span>
                <span class="recipe-stat__label">Almost There</span>
              </div>
              <div class="recipe-stat">
                <span class="recipe-stat__value" id="recipeStatTotal">0</span>
                <span class="recipe-stat__label">Total Recipes</span>
              </div>
            </div>

            <!-- Quick Filter Tabs -->
            <div class="inventory-header">
              <div class="filter-tabs" id="recipeQuickFilter">
                <button class="filter-tab active" data-match="all">All Recipes</button>
                <button class="filter-tab" data-match="full">Can Make Now</button>
                <button class="filter-tab" data-match="partial">Almost There</button>
                <button class="filter-tab" data-match="minimal">Missing Few</button>
              </div>
              <div class="recipe-count">
                <span id="recipeResultCount">0</span> recipes found
              </div>
            </div>

            <!-- Recipe Filters -->
            <div class="recipe-filters">
              <div class="recipe-search">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
                <input type="text" id="recipeSearch" placeholder="Search by name, ingredient, or cuisine..." class="form-input">
              </div>
              <select id="matchFilter" class="filter-select hidden">
                <option value="all">All Recipes</option>
                <option value="full">Can Make Now (100%)</option>
                <option value="partial">Almost There (70%+)</option>
                <option value="minimal">Missing a Few (50%+)</option>
              </select>
              <select id="difficultyFilter" class="filter-select">
                <option value="all">Any Difficulty</option>
                <option value="easy">Easy</option>
                <option value="medium">Medium</option>
                <option value="hard">Hard</option>
              </select>
              <select id="cuisineFilter" class="filter-select">
                <option value="all">All Cuisines</option>
              </select>
            </div>

            <!-- Recipe Grid -->
            <div class="grid grid--recipes" id="recipeGrid">
              <div class="loading-spinner" id="recipeLoading"></div>
            </div>
          </div>

          <!-- Meal Planner View -->
          <div class="view" id="view-mealplanner" data-view="mealplanner">
            <header class="page-header">
              <div class="page-title">
                <h1>Meal Planner</h1>
                <p>Plan your week ahead</p>
              </div>
              <div class="page-actions">
                <button class="btn btn--secondary" id="clearWeekBtn">
                  Clear Week
                </button>
                <button class="btn btn--primary" id="generateShoppingListBtn">
                  Shopping List
                </button>
              </div>
            </header>

            <!-- Week Navigation -->
            <div class="week-nav">
              <button class="week-nav__btn" id="prevWeekBtn" title="Previous week">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="15 18 9 12 15 6"></polyline></svg>
              </button>
              <span class="week-nav__title" id="weekTitle">Jan 20 - 26, 2026</span>
              <button class="btn btn--small btn--ghost" id="todayBtn">Today</button>
              <button class="week-nav__btn" id="nextWeekBtn" title="Next week">
                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="9 18 15 12 9 6"></polyline></svg>
              </button>
            </div>

            <!-- Macro Tracking Section -->
            <div class="macro-tracking" id="macroTrackingSection">
              <!-- Planned Section -->
              <div class="macro-tracking__section">
                <div class="macro-tracking__section-title">üìã Planned</div>
                <!-- Weekly Total -->
                <div class="macro-overview macro-overview--weekly" id="weeklyMacroOverview">
                  <div class="macro-overview__header">
                    <span class="macro-overview__title">Weekly Total</span>
                  </div>
                  <div class="macro-overview__items">
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Calories</span>
                      <span class="macro-overview__value" id="weeklyCalories">0</span>
                      <span class="macro-overview__goal" id="weeklyCaloriesGoal">/ 0</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Protein</span>
                      <span class="macro-overview__value" id="weeklyProtein">0g</span>
                      <span class="macro-overview__goal" id="weeklyProteinGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Carbs</span>
                      <span class="macro-overview__value" id="weeklyCarbs">0g</span>
                      <span class="macro-overview__goal" id="weeklyCarbsGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fat</span>
                      <span class="macro-overview__value" id="weeklyFat">0g</span>
                      <span class="macro-overview__goal" id="weeklyFatGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fiber</span>
                      <span class="macro-overview__value" id="weeklyFiber">0g</span>
                      <span class="macro-overview__goal" id="weeklyFiberGoal">/ 0g</span>
                    </div>
                  </div>
                </div>

                <!-- Daily View -->
                <div class="macro-overview macro-overview--daily" id="dailyMacroOverview">
                  <div class="macro-overview__header">
                    <span class="macro-overview__title" id="dailyMacroTitle">Today</span>
                    <span class="macro-overview__hint">Click a day to view</span>
                  </div>
                  <div class="macro-overview__items">
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Calories</span>
                      <span class="macro-overview__value" id="dailyCalories">0</span>
                      <span class="macro-overview__goal" id="dailyCaloriesGoal">/ 0</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Protein</span>
                      <span class="macro-overview__value" id="dailyProtein">0g</span>
                      <span class="macro-overview__goal" id="dailyProteinGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Carbs</span>
                      <span class="macro-overview__value" id="dailyCarbs">0g</span>
                      <span class="macro-overview__goal" id="dailyCarbsGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fat</span>
                      <span class="macro-overview__value" id="dailyFat">0g</span>
                      <span class="macro-overview__goal" id="dailyFatGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fiber</span>
                      <span class="macro-overview__value" id="dailyFiber">0g</span>
                      <span class="macro-overview__goal" id="dailyFiberGoal">/ 0g</span>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Actual Consumed Section -->
              <div class="macro-tracking__section macro-tracking__section--actual" id="actualMacroSection">
                <div class="macro-tracking__section-title">‚úì Actually Eaten</div>
                <!-- Weekly Actual -->
                <div class="macro-overview macro-overview--weekly macro-overview--actual" id="weeklyActualOverview">
                  <div class="macro-overview__header">
                    <span class="macro-overview__title">Weekly Consumed</span>
                  </div>
                  <div class="macro-overview__items">
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Calories</span>
                      <span class="macro-overview__value" id="weeklyActualCalories">0</span>
                      <span class="macro-overview__goal" id="weeklyActualCaloriesGoal">/ 0</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Protein</span>
                      <span class="macro-overview__value" id="weeklyActualProtein">0g</span>
                      <span class="macro-overview__goal" id="weeklyActualProteinGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Carbs</span>
                      <span class="macro-overview__value" id="weeklyActualCarbs">0g</span>
                      <span class="macro-overview__goal" id="weeklyActualCarbsGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fat</span>
                      <span class="macro-overview__value" id="weeklyActualFat">0g</span>
                      <span class="macro-overview__goal" id="weeklyActualFatGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fiber</span>
                      <span class="macro-overview__value" id="weeklyActualFiber">0g</span>
                      <span class="macro-overview__goal" id="weeklyActualFiberGoal">/ 0g</span>
                    </div>
                  </div>
                </div>

                <!-- Daily Actual -->
                <div class="macro-overview macro-overview--daily macro-overview--actual" id="dailyActualOverview">
                  <div class="macro-overview__header">
                    <span class="macro-overview__title" id="dailyActualTitle">Today</span>
                    <span class="macro-overview__hint">Eaten meals only</span>
                  </div>
                  <div class="macro-overview__items">
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Calories</span>
                      <span class="macro-overview__value" id="dailyActualCalories">0</span>
                      <span class="macro-overview__goal" id="dailyActualCaloriesGoal">/ 0</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Protein</span>
                      <span class="macro-overview__value" id="dailyActualProtein">0g</span>
                      <span class="macro-overview__goal" id="dailyActualProteinGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Carbs</span>
                      <span class="macro-overview__value" id="dailyActualCarbs">0g</span>
                      <span class="macro-overview__goal" id="dailyActualCarbsGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fat</span>
                      <span class="macro-overview__value" id="dailyActualFat">0g</span>
                      <span class="macro-overview__goal" id="dailyActualFatGoal">/ 0g</span>
                    </div>
                    <div class="macro-overview__item">
                      <span class="macro-overview__label">Fiber</span>
                      <span class="macro-overview__value" id="dailyActualFiber">0g</span>
                      <span class="macro-overview__goal" id="dailyActualFiberGoal">/ 0g</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Planner Layout -->
            <div class="planner-layout">
              <!-- Week Calendar Grid -->
              <div class="calendar-section">
                <div class="calendar-week" id="calendarWeek">
                  <!-- Days rendered dynamically -->
                </div>

                <!-- Meal Plan Stats -->
                <div class="stats-grid" style="grid-template-columns: repeat(2, 1fr); margin-top: var(--spacing-xl);">
                  <div class="stat-card">
                    <span class="stat-value text-green" id="statCanMake">0</span>
                    <span class="stat-label">Can Make</span>
                  </div>
                  <div class="stat-card">
                    <span class="stat-value text-orange" id="statNeedShopping">0</span>
                    <span class="stat-label">Need Shopping</span>
                  </div>
                </div>

                <!-- Shopping List Banner -->
                <div class="shopping-banner" id="shoppingBanner">
                  <div class="shopping-banner__info">
                    <h3>Generate Shopping List</h3>
                    <p id="shoppingBannerText">Add meals to your plan to see missing ingredients.</p>
                  </div>
                  <button class="btn btn--primary" id="bannerShoppingBtn">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="9" cy="21" r="1"></circle><circle cx="20" cy="21" r="1"></circle><path d="M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"></path></svg>
                    View List
                  </button>
                </div>
              </div>

              <!-- Recipe Sidebar -->
              <aside class="recipe-sidebar">
                <h3 class="recipe-sidebar__title">
                  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path></svg>
                  Quick Add Recipe
                </h3>
                <input type="text" class="recipe-sidebar__search" placeholder="Search recipes..." id="sidebarRecipeSearch">
                <div class="recipe-sidebar__list" id="sidebarRecipeList">
                  <!-- Recipe items rendered dynamically -->
                </div>
              </aside>
            </div>
          </div>

          <!-- Shopping List View -->
          <div class="view" id="view-shoppinglist" data-view="shoppinglist">
            <header class="page-header">
              <div class="page-title">
                <h1>Shopping List</h1>
                <p>Manage your weekly groceries and restock alerts</p>
              </div>
              <div class="page-actions">
                <button class="btn btn--secondary" id="copyShoppingListView">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect><path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path></svg>
                  Copy List
                </button>
                <button class="btn btn--secondary" id="clearCheckedBtn">
                  Clear Checked
                </button>
                <button class="btn btn--primary" id="refreshShoppingList">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="23 4 23 10 17 10"></polyline><polyline points="1 20 1 14 7 14"></polyline><path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"></path></svg>
                  Refresh
                </button>
              </div>
            </header>

            <!-- Shopping List Stats -->
            <div class="shopping-stats">
              <div class="shopping-stat">
                <span class="shopping-stat__value" id="shoppingTotalItems">0</span>
                <span class="shopping-stat__label">Items</span>
              </div>
              <div class="shopping-stat">
                <span class="shopping-stat__value text-green" id="shoppingCheckedItems">0</span>
                <span class="shopping-stat__label">Checked</span>
              </div>
              <div class="shopping-stat">
                <span class="shopping-stat__value text-orange" id="shoppingRemainingItems">0</span>
                <span class="shopping-stat__label">Remaining</span>
              </div>
            </div>

            <div class="shopping-layout">
              <div class="shopping-main" id="shoppingListView">
                <!-- Shopping list categories rendered dynamically -->
                <div class="empty-state" id="shoppingEmptyState">
                  <div class="empty-state__icon">üõí</div>
                  <h3 class="empty-state__title">No items in shopping list</h3>
                  <p class="empty-state__text">Plan some meals and generate a shopping list</p>
                  <button class="btn btn--primary" data-nav-target="mealplanner">Go to Meal Planner</button>
                </div>
              </div>

              <aside class="suggested-panel" id="suggestedPanel">
                <div class="suggested-panel__inner">
                  <h3 class="suggested-title">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="var(--accent-orange)" stroke-width="2"><path d="M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
                    Low Stock Alerts
                  </h3>
                  <p class="suggested-desc">Based on your pantry inventory, you might want to add these items.</p>
                  <div id="lowStockSuggestions">
                    <!-- Low stock suggestions rendered dynamically -->
                  </div>
                  <button class="btn btn--secondary btn--full" id="addAllLowStock" style="margin-top: var(--spacing-xl);">
                    Add All to List
                  </button>
                </div>
              </aside>
            </div>
          </div>

          <!-- Profile View -->
          <div class="view" id="view-profile" data-view="profile">
            <!-- Profile Header -->
            <div class="profile-header" id="profileHeader">
              <div class="profile-header__avatar" id="profileLargeAvatar">
                <span class="profile-header__avatar-letter">U</span>
              </div>
              <div class="profile-header__info">
                <h2 class="profile-header__name" id="profileDisplayName">User Name</h2>
                <p class="profile-header__username" id="profileUsername">@username</p>
                <p class="profile-header__bio" id="profileBio">No bio yet</p>
                <p class="profile-header__member-since" id="profileMemberSince">Member since January 2026</p>
              </div>
              <div class="profile-header__actions hidden" id="profileOwnerActions">
                <button class="btn btn--secondary" id="editProfileBtn">Edit Profile</button>
                <button class="btn btn--secondary" id="syncDataBtn">
                  <span>‚òÅÔ∏è</span> Sync Data
                </button>
              </div>
            </div>

            <!-- Stats Dashboard -->
            <div class="profile-stats-dashboard" id="profileStatsDashboard">
              <h3 class="profile-section-title">Cooking Stats</h3>
              <div class="profile-stats-grid">
                <div class="profile-stat-card">
                  <span class="profile-stat-card__number" id="statMealsPlannedProfile">0</span>
                  <span class="profile-stat-card__label">Meals Planned</span>
                </div>
                <div class="profile-stat-card">
                  <span class="profile-stat-card__number" id="statRecipesTried">0</span>
                  <span class="profile-stat-card__label">Recipes Tried</span>
                </div>
                <div class="profile-stat-card">
                  <span class="profile-stat-card__number" id="statCurrentStreak">0</span>
                  <span class="profile-stat-card__label">Day Streak</span>
                </div>
                <div class="profile-stat-card">
                  <span class="profile-stat-card__number" id="statLongestStreak">0</span>
                  <span class="profile-stat-card__label">Best Streak</span>
                </div>
              </div>
            </div>

            <!-- Favorite Cuisines -->
            <div class="profile-cuisines" id="profileCuisines">
              <h3 class="profile-section-title">Favorite Cuisines</h3>
              <div class="profile-cuisines-grid" id="cuisinesGrid">
                <p class="profile-cuisines__empty">No favorite cuisines yet. Start planning meals!</p>
              </div>
            </div>

            <!-- Sync Status (Owner Only) -->
            <div class="profile-sync-status hidden" id="profileSyncStatus">
              <div class="profile-sync-status__info">
                <span class="profile-sync-status__label">Cloud Sync Status</span>
                <span class="profile-sync-status__time">Last synced: <span id="lastSyncTime">Never</span></span>
              </div>
              <div class="profile-sync-status__actions">
                <button class="btn btn--small" id="syncPantryBtn">Sync Pantry</button>
                <button class="btn btn--small" id="syncMealPlansBtn">Sync Meals</button>
              </div>
            </div>

            <!-- Profile Message -->
            <div class="profile-message hidden" id="profileMessage">
              <p id="profileMessageText"></p>
            </div>

            <!-- Hidden elements for compatibility -->
            <div class="hidden">
              <span id="pantrySyncStatus"></span>
              <span id="mealPlanSyncStatus"></span>
            </div>
          </div>

        </div>
      </main>
    </div>

    <!-- Add Ingredient Modal -->
    <div class="modal" id="addIngredientModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container modal__container--xlarge">
        <button class="modal__close" aria-label="Close modal">&times;</button>

        <div class="modal__header">
          <h2 class="modal__title">Add to Pantry</h2>
          <p class="modal__subtitle">Browse or search for ingredients to add</p>
        </div>

        <div class="modal__body ingredient-browser">
          <!-- Search Bar -->
          <div class="ingredient-browser__search">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="11" cy="11" r="8"></circle>
              <path d="m21 21-4.35-4.35"></path>
            </svg>
            <input type="text" id="ingredientSearchInput" class="form-input" placeholder="Search ingredients..." autocomplete="off">
            <input type="hidden" id="selectedIngredientId">
          </div>

          <!-- Category Tabs -->
          <div class="ingredient-browser__categories" id="ingredientCategoryTabs">
            <!-- Categories populated by JavaScript -->
          </div>

          <!-- Ingredients Grid -->
          <div class="ingredient-browser__grid" id="ingredientBrowserGrid">
            <!-- Ingredients populated by JavaScript -->
          </div>
        </div>

        <!-- Selection panel removed - inline +/- controls now handle adding -->
      </div>
    </div>

    <!-- Recipe Detail Modal -->
    <div class="modal" id="recipeModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container modal__container--large">
        <button class="modal__close" aria-label="Close modal">&times;</button>
        <div class="recipe-detail" id="recipeDetail">
          <!-- Populated dynamically -->
        </div>
      </div>
    </div>

    <!-- Import Options Modal -->
    <div class="modal" id="importModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container">
        <button class="modal__close" aria-label="Close modal">&times;</button>
        <div class="modal__header">
          <h2 class="modal__title">Import Pantry</h2>
        </div>
        <div class="modal__body">
          <p>How would you like to import?</p>
        </div>
        <div class="modal__footer">
          <button class="btn btn--secondary" id="importMerge">Merge with existing</button>
          <button class="btn btn--primary" id="importReplace">Replace all</button>
        </div>
      </div>
    </div>

    <!-- Recipe Browser Modal (Full Screen) - Swiss Design -->
    <div class="modal" id="recipeBrowserModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container modal__container--xlarge">
        <button class="modal__close" aria-label="Close modal">&times;</button>

        <div class="modal__header">
          <h2 class="modal__title">Select Recipe</h2>
          <span class="recipe-browser__date" id="browserSelectedDate"></span>
        </div>

        <div class="modal__body recipe-browser-body">
          <!-- Filters Row -->
          <div class="recipe-browser__filters">
            <div class="recipe-browser__search">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="11" cy="11" r="8"></circle><path d="m21 21-4.35-4.35"></path></svg>
              <input type="text" id="browserSearchInput" class="form-input" placeholder="Search recipes...">
            </div>
            <select id="browserCuisineFilter" class="recipe-browser__select">
              <option value="">All Cuisines</option>
            </select>
            <select id="browserMealTypeFilter" class="recipe-browser__select">
              <option value="">All Meals</option>
              <option value="breakfast">Breakfast</option>
              <option value="lunch">Lunch</option>
              <option value="dinner">Dinner</option>
              <option value="snack">Snack</option>
            </select>
            <select id="browserDifficultyFilter" class="recipe-browser__select">
              <option value="">Any Difficulty</option>
              <option value="easy">Easy</option>
              <option value="medium">Medium</option>
              <option value="hard">Hard</option>
            </select>
          </div>

          <!-- Nutrition Filters Row -->
          <div class="recipe-browser__nutrition-filters">
            <div class="nutrition-filter">
              <label for="browserMaxCalories">Max Calories</label>
              <input type="number" id="browserMaxCalories" class="form-input form-input--small" placeholder="e.g. 500" min="0" step="50">
            </div>
            <div class="nutrition-filter">
              <label for="browserMinProtein">Min Protein (g)</label>
              <input type="number" id="browserMinProtein" class="form-input form-input--small" placeholder="e.g. 20" min="0" step="5">
            </div>
            <button type="button" class="btn btn--small btn--ghost nutrition-filter__btn" id="browserFitsRemaining">
              Fits Today's Budget
            </button>
          </div>

          <!-- Results Count -->
          <div class="recipe-browser__count" id="browserResultsCount">0 recipes</div>

          <!-- Recipe List -->
          <div class="recipe-browser__list" id="browserRecipesGrid">
            <!-- Recipe rows rendered dynamically -->
          </div>
        </div>

        <!-- Recipe Preview Panel -->
        <div class="recipe-preview" id="recipeConfirmPanel">
          <div class="recipe-preview__header">
            <div class="recipe-preview__title-row">
              <h3 class="recipe-preview__title" id="confirmRecipeName">Recipe Name</h3>
              <button type="button" class="recipe-preview__close" id="cancelSelectRecipe">&times;</button>
            </div>
            <div class="recipe-preview__meta" id="confirmNutrition"></div>
          </div>

          <div class="recipe-preview__body">
            <!-- Ingredients Column -->
            <div class="recipe-preview__section">
              <div class="recipe-preview__section-header">
                <span class="recipe-preview__section-label">Ingredients</span>
                <div class="recipe-preview__servings">
                  <label>Servings</label>
                  <input type="number" id="confirmServings" class="form-input" value="4" min="1" max="20">
                </div>
              </div>
              <div class="recipe-preview__ingredients" id="confirmIngredientsList">
                <!-- Ingredients rendered here -->
              </div>
            </div>

            <!-- Instructions Column -->
            <div class="recipe-preview__section">
              <span class="recipe-preview__section-label">Instructions</span>
              <div class="recipe-preview__instructions" id="confirmInstructionsList">
                <!-- Instructions rendered here -->
              </div>
            </div>
          </div>

          <div class="recipe-preview__footer">
            <button type="button" class="btn btn--primary btn--lg" id="confirmAddMeal">Add to Meal Plan</button>
          </div>

          <!-- Hidden meal type - default to dinner -->
          <input type="hidden" id="confirmMealType" value="dinner">
        </div>
      </div>
    </div>

    <!-- Add Meal Modal -->
    <div class="modal" id="addMealModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container">
        <button class="modal__close" aria-label="Close modal">&times;</button>
        <div class="modal__header">
          <h2 class="modal__title">Add Meal to Plan</h2>
        </div>
        <div class="modal__body">
          <form id="addMealForm">
            <div class="form-group">
              <label for="mealDate">Date</label>
              <input type="date" id="mealDate" class="form-input" required>
            </div>
            <div class="form-group">
              <label for="mealRecipeSearch">Search Recipe</label>
              <div class="autocomplete-wrapper">
                <input type="text" id="mealRecipeSearch" class="form-input" placeholder="Start typing to search..." autocomplete="off">
                <div class="autocomplete-results recipe-results" id="mealRecipeResults"></div>
              </div>
            </div>
            <div class="form-group" id="selectedRecipeDisplay" style="display: none;"></div>
            <div class="form-group" id="mealAvailabilityWarning" style="display: none;"></div>
            <div class="form-group" style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
              <div>
                <label for="mealType">Meal Type</label>
                <select id="mealType" class="form-input">
                  <option value="breakfast">Breakfast</option>
                  <option value="lunch">Lunch</option>
                  <option value="dinner" selected>Dinner</option>
                  <option value="snack">Snack</option>
                </select>
              </div>
              <div>
                <label for="mealServings">Servings</label>
                <input type="number" id="mealServings" class="form-input" value="4" min="1" max="20">
              </div>
            </div>
            <div class="form-group">
              <label for="mealNotes">Notes (optional)</label>
              <input type="text" id="mealNotes" class="form-input" placeholder="e.g., Double the garlic">
            </div>
          </form>
        </div>
        <div class="modal__footer">
          <button type="button" class="btn btn--secondary" id="cancelAddMeal">Cancel</button>
          <button type="submit" class="btn btn--primary" id="submitAddMeal" disabled>Add to Plan</button>
        </div>
      </div>
    </div>

    <!-- Shopping List Modal -->
    <div class="modal" id="shoppingListModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container modal__container--large">
        <button class="modal__close" aria-label="Close modal">&times;</button>
        <div class="modal__header">
          <h2 class="modal__title">Shopping List</h2>
          <p id="shoppingListSubtitle" style="color: var(--text-body); font-size: var(--font-size-sm);">Items needed for this week</p>
        </div>
        <div class="modal__body">
          <div class="shopping-list" id="shoppingListContent">
            <!-- Shopping list items rendered here -->
          </div>
        </div>
        <div class="modal__footer">
          <button class="btn btn--secondary" id="copyShoppingList">
            Copy to Clipboard
          </button>
          <button class="btn btn--primary" id="closeShoppingList">Done</button>
        </div>
      </div>
    </div>

    <!-- Meal Detail Modal -->
    <div class="modal" id="mealDetailModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container">
        <button class="modal__close" aria-label="Close modal">&times;</button>
        <div class="meal-detail" id="mealDetailContent">
          <!-- Meal details rendered here -->
        </div>
      </div>
    </div>

    <!-- Quantity Modal -->
    <div class="modal" id="quantityModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container">
        <button class="modal__close" aria-label="Close modal">&times;</button>

        <div class="modal__header" style="display: flex; align-items: center; gap: var(--spacing-md);">
          <span id="quantityModalIcon" style="font-size: 32px;"></span>
          <h2 class="modal__title" id="quantityModalTitle">Add Ingredient</h2>
        </div>

        <div class="modal__body">
          <div id="quantityCurrentStock" style="display: none; margin-bottom: var(--spacing-lg); padding: var(--spacing-md); background: var(--surface-gray); border-radius: var(--radius-sm);">
            <span>Currently in pantry: </span>
            <strong id="quantityCurrentAmount">0</strong>
          </div>

          <div id="quantityPresets" style="display: flex; flex-wrap: wrap; gap: var(--spacing-sm); margin-bottom: var(--spacing-lg);">
            <!-- Preset buttons populated dynamically -->
          </div>

          <div style="text-align: center; color: var(--text-light); margin-bottom: var(--spacing-lg);">
            or enter custom amount
          </div>

          <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
            <input type="number" id="quantityInput" class="form-input" min="0" step="0.25" placeholder="Amount">
            <select id="quantityUnit" class="form-input">
              <!-- Units populated dynamically -->
            </select>
          </div>
        </div>

        <div class="modal__footer">
          <button class="btn btn--primary btn--full" id="quantitySubmit" disabled>
            Add to Pantry
          </button>
        </div>
      </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="modal" id="editProfileModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container">
        <button class="modal__close" aria-label="Close modal">&times;</button>
        <div class="modal__header">
          <h2 class="modal__title">Edit Profile</h2>
        </div>
        <div class="modal__body">
          <form id="editProfileForm">
            <div class="form-group">
              <label for="editDisplayName">Display Name</label>
              <input type="text" id="editDisplayName" class="form-input" placeholder="Your display name" maxlength="50">
            </div>
            <div class="form-group">
              <label for="editBio">Bio</label>
              <textarea id="editBio" class="form-input" placeholder="Tell us about your cooking journey..." maxlength="200" rows="3"></textarea>
              <span style="font-size: var(--font-size-xs); color: var(--text-light);"><span id="bioCharCount">0</span>/200 characters</span>
            </div>
            <div class="form-group">
              <label for="editLocation">Location (optional)</label>
              <input type="text" id="editLocation" class="form-input" placeholder="e.g., New York, NY" maxlength="100">
            </div>
            <div class="form-group">
              <label style="display: flex; align-items: center; gap: var(--spacing-sm); cursor: pointer;">
                <input type="checkbox" id="editIsPublic">
                <span>Make profile public</span>
              </label>
              <span style="font-size: var(--font-size-xs); color: var(--text-light);">Others can view your stats and cooking activity</span>
            </div>
          </form>
        </div>
        <div class="modal__footer">
          <button type="button" class="btn btn--secondary" id="cancelEditProfile">Cancel</button>
          <button type="submit" class="btn btn--primary" id="saveProfile">Save Changes</button>
        </div>
      </div>
    </div>

    <!-- Nutrition Preferences Modal -->
    <div class="modal" id="nutritionPrefsModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container modal__container--large">
        <button class="modal__close" aria-label="Close modal">&times;</button>

        <div class="modal__header">
          <h2 class="modal__title">Nutrition Goals</h2>
          <p class="modal__subtitle">Set your daily macro targets</p>
        </div>

        <div class="modal__body nutrition-prefs">
          <!-- Enable/Disable Toggle -->
          <div class="nutrition-prefs__toggle">
            <label class="toggle-switch">
              <input type="checkbox" id="nutritionTrackingEnabled" checked>
              <span class="toggle-switch__slider"></span>
            </label>
            <span>Enable nutrition tracking</span>
          </div>

          <!-- Presets -->
          <div class="nutrition-prefs__presets">
            <span class="nutrition-prefs__label">Quick Presets</span>
            <div class="preset-buttons" id="nutritionPresetButtons">
              <button class="preset-btn" data-preset="weightLoss">Weight Loss</button>
              <button class="preset-btn" data-preset="maintenance">Maintenance</button>
              <button class="preset-btn" data-preset="muscleGain">Muscle Gain</button>
              <button class="preset-btn" data-preset="lowCarb">Low Carb</button>
              <button class="preset-btn" data-preset="highProtein">High Protein</button>
            </div>
          </div>

          <!-- Calorie Slider -->
          <div class="nutrition-prefs__section">
            <div class="nutrition-prefs__row">
              <label for="goalCalories">Daily Calories</label>
              <div class="goal-type-toggle">
                <button class="goal-type-btn active" data-type="limit" data-macro="calories">Limit</button>
              </div>
            </div>
            <div class="slider-group">
              <input type="range" id="goalCaloriesSlider" min="1200" max="4000" step="50" value="2000" class="slider-input">
              <input type="number" id="goalCalories" class="form-input form-input--small" min="1200" max="4000" value="2000">
              <span class="slider-unit">cal</span>
            </div>
          </div>

          <!-- Protein -->
          <div class="nutrition-prefs__section">
            <div class="nutrition-prefs__row">
              <label for="goalProtein">Protein</label>
              <div class="goal-type-toggle">
                <button class="goal-type-btn" data-type="limit" data-macro="protein">Limit</button>
                <button class="goal-type-btn active" data-type="minimum" data-macro="protein">Minimum</button>
              </div>
            </div>
            <div class="slider-group">
              <input type="range" id="goalProteinSlider" min="30" max="300" step="5" value="120" class="slider-input">
              <input type="number" id="goalProtein" class="form-input form-input--small" min="30" max="300" value="120">
              <span class="slider-unit">g</span>
            </div>
          </div>

          <!-- Carbs -->
          <div class="nutrition-prefs__section">
            <div class="nutrition-prefs__row">
              <label for="goalCarbs">Carbohydrates</label>
              <div class="goal-type-toggle">
                <button class="goal-type-btn active" data-type="limit" data-macro="carbs">Limit</button>
                <button class="goal-type-btn" data-type="minimum" data-macro="carbs">Minimum</button>
              </div>
            </div>
            <div class="slider-group">
              <input type="range" id="goalCarbsSlider" min="20" max="500" step="10" value="250" class="slider-input">
              <input type="number" id="goalCarbs" class="form-input form-input--small" min="20" max="500" value="250">
              <span class="slider-unit">g</span>
            </div>
          </div>

          <!-- Fat -->
          <div class="nutrition-prefs__section">
            <div class="nutrition-prefs__row">
              <label for="goalFat">Fat</label>
              <div class="goal-type-toggle">
                <button class="goal-type-btn active" data-type="limit" data-macro="fat">Limit</button>
                <button class="goal-type-btn" data-type="minimum" data-macro="fat">Minimum</button>
              </div>
            </div>
            <div class="slider-group">
              <input type="range" id="goalFatSlider" min="20" max="200" step="5" value="65" class="slider-input">
              <input type="number" id="goalFat" class="form-input form-input--small" min="20" max="200" value="65">
              <span class="slider-unit">g</span>
            </div>
          </div>

          <!-- Fiber -->
          <div class="nutrition-prefs__section">
            <div class="nutrition-prefs__row">
              <label for="goalFiber">Fiber</label>
              <div class="goal-type-toggle">
                <button class="goal-type-btn" data-type="limit" data-macro="fiber">Limit</button>
                <button class="goal-type-btn active" data-type="minimum" data-macro="fiber">Minimum</button>
              </div>
            </div>
            <div class="slider-group">
              <input type="range" id="goalFiberSlider" min="10" max="60" step="5" value="30" class="slider-input">
              <input type="number" id="goalFiber" class="form-input form-input--small" min="10" max="60" value="30">
              <span class="slider-unit">g</span>
            </div>
          </div>

          <!-- Display Settings -->
          <div class="nutrition-prefs__section nutrition-prefs__section--display">
            <span class="nutrition-prefs__label">Display Settings</span>
            <div class="display-options">
              <label class="checkbox-label">
                <input type="checkbox" id="showNutritionOnCalendar" checked>
                <span>Show nutrition on calendar</span>
              </label>
              <div class="select-group">
                <label for="primaryMacroSelect">Primary display:</label>
                <select id="primaryMacroSelect" class="form-input form-input--small">
                  <option value="calories" selected>Calories</option>
                  <option value="protein">Protein</option>
                  <option value="carbs">Carbs</option>
                  <option value="fat">Fat</option>
                  <option value="fiber">Fiber</option>
                </select>
              </div>
            </div>
          </div>
        </div>

        <div class="modal__footer">
          <button class="btn btn--secondary" id="resetNutritionPrefs">Reset to Defaults</button>
          <button class="btn btn--primary" id="saveNutritionPrefs">Save Goals</button>
        </div>
      </div>
    </div>

    <!-- Auth Modal -->
    <div class="modal" id="authModal">
      <div class="modal__backdrop"></div>
      <div class="modal__container auth-modal">
        <button class="modal__close" aria-label="Close modal">&times;</button>

        <div class="auth-modal__header">
          <h2 class="auth-modal__title" id="authModalTitle">Welcome Back</h2>
        </div>

        <div class="auth-message hidden" id="authError"></div>

        <form class="auth-form" id="authForm">
          <div class="form-group hidden" id="usernameGroup">
            <label for="authUsername">Username</label>
            <input type="text" id="authUsername" class="form-input" placeholder="Choose a username" minlength="3" autocomplete="username">
          </div>

          <div class="form-group">
            <label for="authEmail">Email</label>
            <input type="email" id="authEmail" class="form-input" placeholder="your@email.com" required autocomplete="email">
          </div>

          <div class="form-group" id="passwordGroup">
            <label for="authPassword">Password</label>
            <input type="password" id="authPassword" class="form-input" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" minlength="6" autocomplete="current-password">
          </div>

          <button type="submit" class="btn btn--primary btn--full" id="authSubmitBtn">Sign In</button>
        </form>

        <!-- Login mode links -->
        <div class="auth-links" id="loginLinks">
          <p>Don't have an account? <a href="#" id="showRegister">Create one</a></p>
          <p><a href="#" id="showReset">Forgot password?</a></p>
        </div>

        <!-- Register mode links -->
        <div class="auth-links hidden" id="registerLinks">
          <p>Already have an account? <a href="#" id="showLogin">Sign in</a></p>
        </div>

        <!-- Reset mode links -->
        <div class="auth-links hidden" id="resetLinks">
          <p><a href="#" id="backToLogin">‚Üê Back to sign in</a></p>
        </div>
      </div>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>
